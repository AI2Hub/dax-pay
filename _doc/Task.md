## 单商户
2.0.6: 去除组合支付, 一系列代码优化
- [x] 删除现金支付和储值卡支付方式
- [x] 支付订单
  - [x] 支付改造
  - [x] 回调改造, 不再使用继承类, 简化逻辑
  - [x] 发送通知改造
- [x] 去除组合支付和场景，降低逻辑的的复杂度
  - [x] 退款场景
  - [x] 关闭支付订单
  - [x] 同步操作时
  - [x] 订单修复
  - [x] 支付和退款回调
  - [x] 去除现金支付和储值卡支付方式
- [x] 三方支付通道订单号规则优化: 支付P、退款R、分账A，根据环境加前缀：DEV_、DEMO_、PRE_
- [x] 金额显示统一使用元
- [x] 使用切面统一处理API调用异常, 做统一包装返回
- [x] 支付接口优化
- [x] 前端查询条件适配
- [x] paymentId替换
- [x] 对账单改造
  - [x] 去除对账单明细按钮
  - [x] 增加对账结果计算和显示
  - [x] 增加下载原始对账单功能(保证将明细文件进行储存)
    - [x] 保存原始的文件
      - [x] 微信
      - [x] 支付宝
      - [x] 云闪付
    - [x] 解析原有文件, 可以转换为指定格式进行下载
  - [x] 增加下载系统对账单功能
  - [x] 增加对单差异数据查看功能和查看功能
- [x] 支付订单和退款订单页面添加实时金额汇总展示
- [x] 自动分账改造
  - [x] 创建定时任务, 自动对待分账订单进行分账
  - [x] 增加定时同步分账状态任务
  - [x] 增加自动完结功能
- [x] 数据加密方式改为类型处理器模式
- [x] 页面优化
- [x] 集成bootx-platform到项目中
- [x] 包结构名称修改为cn.daxpay.single
- [x] 自动同步任务不生效
- [x] 计算收款金额时对产生退款的支付订单未进行计算
2.0.7: 分账完善和基础架构优化
- [ ] 新增资金流水
- [ ] 增加对超时订单进行处理(数据库同步)
- [ ] 支持分账组分账和自己传接收方进行分账
- [ ] DEMO增加获取微信OpenID和支付宝OpenId功能
- [ ] 分账接收方管理提供接口调用
- [ ] 分账情况查询, 分账结果/剩余可分账金额
- [ ] 分账回调处理
- [ ] 分账组管理提供接口调用
- [ ] 分账通知
- [ ] 分账支持手动和自动分账两种
- [ ] 金额过小不进行分账, 增加新状态
- [ ] 增加收单收银台功能

2.1.x 版本内容
- [ ] 对账回退及退款
- [ ] 统计报表功能
- [ ] 微信新增V3版本接口
- [ ] 支付宝新增V3版本接口
- [ ] 增加各类日志记录,例如钱包的各项操作
- [ ] 增加撤销功能，用于处理线下支付订单的情况
- [ ] 数据库表进行规则, 字段设置长度, 增加索引
- [ ] 订单超时支持数据表级别触发
- [ ] 针对同步/对账等出现脏数据导致阻塞的问题, 进行优化
    - [ ] 同步接口
    - [ ] 对账接口
- [ ] 增加通道开通能力管理，在操作发起前的校验时提前进行拦截
- [ ] 支付通道两个独立的配置进行合并为一个
    
**任务池**
- [x] 对账改造: 
  - [x] 分为三级: 原始对账单(三方机构原始凭证)、系统对账单(系统内部订单信息)、差异单,
  - [ ] 单据类型: 明细记录, 汇总记录
- [ ] 支持转账操作, 通过支付通道专有参数进行实现, 转账时只能单个通道进行操作
- [ ] 支付成功回调后, 如果订单已超时, 则进入待退款订单中，提示进行退款，或者自动退款
- [ ] 新增支付单预警功能, 处理支付单与网关状态不一致且无法自动修复的情况
- [ ] 通道费率计算
- [ ] 每日资金流水计算
- [ ] 微信消息通知相关配置
- [ ] 钉钉消息通知配置
- [ ] 支付宝接口升级为V3接口
- [ ] 增加验签调试等功能的页面
- [ ] 请求IP参数增加正则校验
